什么是文件上传漏洞?
如果对文件上传路径变量过滤不严，并且对用户上传的文件后缀以及文件类型限制不严，攻击者可通过 Web
访问的目录上传任意文件，包括网站后门文件`webshell`，进而远程控制网站服务器。

所以一般需注意：

在开发网站及应用程序过程中，需严格限制和校验上传的文件，禁止上传恶意代码的文件 限制相关目录的执行权限，防范 webshell 攻击
危害就是上传网站后门文件，获取`webshell`

注意：`ctf`中的文件上传题目大多数都为黑盒测试，做题流程通常都为一个个方法测试进行推测，

文件上传思路

客户端：`js`检查

服务端：

1. 检查后缀
    1. 黑名单
        1. 上传特殊可解析后缀
        2. 上传`.htaccess`
        3. 后缀大小写绕过
        4. 点绕过
        5. 空格绕过
        6. `::$DATA`绕过
        7. 配合解析漏洞
            1. `Apache` 陌生后缀解析漏洞
            2. `Apache` 换行解析漏洞
        8. 双后缀名绕过
    2. 白名单
        1. `MIME` 绕过
        2. `%00` 截断
        3. `0x00` 截断
2. 检查内容
    1. 文件头检查
    2. 突破`getimagesize()`
    3. 突破`exif_imagetype()`
    4. 二次渲染
3. 代码逻辑
    1. 条件竞争