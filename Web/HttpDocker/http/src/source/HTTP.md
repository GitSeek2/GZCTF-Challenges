# 教程

https://www.bookstack.cn/read/http-study

# 客户端的真实 IP 地址

可以用例如`X-Forwarded-For: 127.0.0.1`来设置HTTP请求的标头来告诉服务器自己是从本地访问的

1. `X-Forwarded-For`: 这个 HTTP 头部字段用于识别通过 HTTP 代理或负载均衡器连接到 web 服务器的客户端的原始 IP 地址。当流量通过代理或负载均衡器时，这些设备会在 HTTP 头部添加 `X-Forwarded-For` 字段，值为原始客户端的 IP 地址。

2. `X-Real-IP`: 这个 HTTP 头部字段也用于识别客户端的原始 IP 地址。它通常用于在代理服务器后面的应用服务器上，以获取客户端的真实 IP 地址。

3. `X-Client-IP`: 这个 HTTP 头部字段的用途和 `X-Forwarded-For` 以及 `X-Real-IP` 类似，也是用于识别客户端的原始 IP 地址。不过，它不如前两者常见。

4. `Client-IP`: 这个 HTTP 头部字段的用途和上述三者类似，也是用于识别客户端的原始 IP 地址。它的使用频率也相对较低。

这些头部字段的主要目的是在客户端和服务器之间的连接经过代理或负载均衡器时，能够在服务器端获取到客户端的真实 IP 地址。

---


可以用例如`Referer: http://www.example.com/index.html`来设置HTTP请求的标头来告诉服务器自己是来自`www.example.com`的`index.html`页面

# 请求来源

1. `Origin`: 这个头部字段用于标识请求的来源，但它只包含协议、主机和端口号，不包含路径或查询参数。它主要用于跨站请求伪造（CSRF）防护。

2. `X-Requested-With`: 这个头部字段用于标识 Ajax 请求。它的值通常为 `XMLHttpRequest`。

3. `Referer`: 这个头部字段表示请求来源的 URL。当你从一个页面点击链接到另一个页面时，原始页面的 URL 就会被包含在 `Referer` 头部字段中。这对于跟踪用户是如何到达当前页面的非常有用。

# 客户端软件类型

可以用例如`User-Agent: Chrome`来设置HTTP请求的标头来告诉服务器发出请求的客户端是Chrome

`User-Agent`是一个 HTTP 头部字段，它描述了发出请求的客户端的软件类型和版本。

---


# 代理服务器

可以用例如`Via: 1.0 gw.example.com(Squid/3.1)`来设置HTTP请求的标头来告诉服务器发出请求经过了代理服务器`gw.example.com`。

行头的1.0是指接受请求的服务器上应用的HTTP版本协议。接下来经过，若果存在更多的代理服务器亦是如此，在 Via 首部附加服务器信息，也可增加 1 个新的 Via 首部写入服务器信息。

`Squid/3.1`表示代理服务器的类型和版本，这里是 Squid 3.1。

`Via` 是一个 HTTP通用首部字段，不仅仅是请求，用于追踪请求和响应在代理服务器之间的转发。每经过一个代理服务器，就会在 `Via` 字段中添加该代理服务器的信息。

---


但是，这些头部字段的使用取决于服务器的配置。并非所有的服务器都会检查这些头部。如果服务器没有被配置为检查这些头部，那么添加这些头部将没有任何效果。同时，由于这些头部字段可以被任意设置，因此并不能100%保证提供的信息就是客户端的真实信息。

